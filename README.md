# Walking Distance To Nearest MRT
 Given Lat Long, find nearest MRT (in terms of walking distance)

## Description
This repository uses [OSMNX](https://github.com/gboeing/osmnx) Street network to find the walking distance between coordinates (LatLong) and its nearest MRT Station. 


## Usage
Firstly, you would need anaconda installed. Run Anaconda prompt and run the following commands as per [OSMNX's Documentation](https://osmnx.readthedocs.io/en/stable/index.html):
```
conda config --prepend channels conda-forge
conda create -n ox --strict-channel-priority osmnx
```
Once Installation is complete, run `conda activate ox` to activate the enviromnent.

To check that everything is working order, run `python test.py`.

If an error message along the line of `ImportError: cannot import name 'gcd' from fractions'` appear, run `pip install -U networkx` to upgrade `networkx` library to the latest version. The error occurred due to Python version & networkx version incompatibility


#### <u>main.py</u>
This `.py` script finds the walking route given a list of Latitude and Longitude `.csv` file and the MRT `.geojson` file, retrieved from [Data.gov.sg](https://data.gov.sg/dataset/master-plan-2019-rail-station-layer). <br/><br/>
Run by executing `python main.py` on your python environment. A simple menu will guide you through the input of files.

__NOTE__: The coordinates of the routes along the shortest path is in __[Lat, Long]__ format. If you need it to be in __[Long, Lat]__ (i.e. Qlik GeoAnalytics) format, Open `main.py` with a text editor, comment out line __39__ & __40__, and uncomment line __41__ & __42__
* __Input__ (Files __must__ be in the same folder as `main.py`)
    * Coordinates `.csv` file 
        * File __must__ contain fields 'Latitude' and 'Longitude' header
        * Example shown in `AddressMapDemo.csv`
    * Master Plan MRT Layer `.geojson` file 
        * Full file from [Data.gov.sg](https://data.gov.sg/dataset/master-plan-2019-rail-station-layer), Last updated: 09 Dec 2019
* __Output__
    * Rail station layer `.geojson` file in `.csv` format 
        * Example shown in `Pre-crawled/master-plan-2019-rail-station-layer-geojson.csv`
    * Coordinates `.csv` file with Nearest MRT & Walking Distance appended. 
        * Output file name will be input file name + `-WalkDist` behind, e.g. AddressMapDemo-WalkDist.csv
        * Example shown in `Pre-crawled/addressmap-WalkDist.csv`
    
        
## Pre-crawled dataset
* 9,299 HDB Blocks with their nearest MRT, the routes & distance crawled.
* Crawled on 29 Jul 2021
* Generated by running `main.py` on the addressmap.csv, generated using my other repository [Postal Code Crawler](https://github.com/manekiyong/Postal-Code-Crawler)
* Shortest Route is in __[Long, Lat]__ format